<div id="mlv-widget-container--{{ block.id }}"></div>

<script>
  (function() {
    var blockId = "{{ block.id }}";
    var settings = {
      placement: "{{ block.settings.placement }}",
      fixedCorner: "{{ block.settings.fixed_corner }}",
      distanceTop: {{ block.settings.distance_top }},
      distanceRight: {{ block.settings.distance_right }},
      distanceBottom: {{ block.settings.distance_bottom }},
      distanceLeft: {{ block.settings.distance_left }}
    };

    console.log("üìù Theme Block Settings:", settings);

    // Store settings globally
    window.__MLV_THEME_SETTINGS__ = settings;

    // Dispatch event to tell widget to re-render
    var event = new CustomEvent('mlv:theme:settings:update', { 
      detail: settings 
    });
    window.dispatchEvent(event);
  })();
</script>

<!-- Load currency widget script -->
<script src="{{ 'currency-widget.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Currency Switcher",
  "target": "section",
  "settings": [
    {
      "type": "select",
      "id": "placement",
      "label": "Placement",
      "default": "Fixed Position",
      "options": [
        { "value": "Fixed Position", "label": "Fixed position (bottom right)" },
        { "value": "Inline with the header", "label": "Inline with header" },
        { "value": "Don't show at all", "label": "Don't show" }
      ]
    },
    {
      "type": "select",
      "id": "fixed_corner",
      "label": "Fixed corner (when fixed)",
      "default": "bottom-right",
      "options": [
        { "value": "top-left", "label": "Top left" },
        { "value": "top-right", "label": "Top right" },
        { "value": "bottom-left", "label": "Bottom left" },
        { "value": "bottom-right", "label": "Bottom right" }
      ]
    },
    {
      "type": "range",
      "id": "distance_top",
      "label": "Distance from top (px)",
      "default": 16,
      "min": 0,
      "max": 200,
      "step": 1
    },
    {
      "type": "range",
      "id": "distance_right",
      "label": "Distance from right (px)",
      "default": 16,
      "min": 0,
      "max": 200,
      "step": 1
    },
    {
      "type": "range",
      "id": "distance_bottom",
      "label": "Distance from bottom (px)",
      "default": 16,
      "min": 0,
      "max": 200,
      "step": 1
    },
    {
      "type": "range",
      "id": "distance_left",
      "label": "Distance from left (px)",
      "default": 16,
      "min": 0,
      "max": 200,
      "step": 1
    }
  ]
}
{% endschema %}